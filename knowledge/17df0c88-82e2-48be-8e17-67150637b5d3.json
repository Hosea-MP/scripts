{
  "id": "17df0c88-82e2-48be-8e17-67150637b5d3",
  "name": "Account \u003e P2P_STATUS",
  "description": "[Put this after Bank Check] Will check v(P2P_STATUS). If P2P, hop to members world. If F2P, check for gold to buy bond else mule enough for a bond.",
  "parameters": "",
  "fail": false,
  "actions": [
    {
      "id": "SET_VARIABLE",
      "properties": {
        "Value": "P2PCheck",
        "Variable name": "CURRENT_TASK"
      }
    },
    {
      "id": "CUSTOM_76ffccc9-35e9-409b-ace8-a941e9754582"
    },
    {
      "id": "IF_MEMBERSHIP_LEFT_IS",
      "properties": {
        "days": {
          "class": "Number",
          "operator": "GREATER_THAN_OR_EQUALS",
          "value": "2"
        }
      },
      "children": [
        {
          "id": "SET_VARIABLE",
          "customDisplayName": "Set variable \u0027v(P2P_STATUS)\u0027 to \u0027Member\u0027",
          "properties": {
            "Value": "Member",
            "Variable name": "P2P_STATUS"
          },
          "children": [
            {
              "id": "IF_VARIABLE_IS",
              "properties": {
                "Filter Value By": {
                  "class": "Variable",
                  "logic": "NONE",
                  "type": "AS_TEXT",
                  "operator": "EQUALS",
                  "value": "Member"
                },
                "Variable name": "P2P_STATUS"
              },
              "children": [
                {
                  "id": "SET_VARIABLE",
                  "properties": {
                    "Value": "Hop2P2P",
                    "Variable name": "CURRENT_TASK"
                  }
                },
                {
                  "id": "CUSTOM_d4d09f20-4af6-4e9f-b67c-f7c450b6a2b0"
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "IF_MEMBERSHIP_LEFT_IS",
      "properties": {
        "days": {
          "class": "Number",
          "operator": "LESS_THAN_OR_EQUALS",
          "value": "1"
        }
      },
      "children": [
        {
          "id": "SET_VARIABLE",
          "customDisplayName": "Set variable \u0027v(P2P_STATUS)\u0027 to \u0027F2P\u0027",
          "properties": {
            "Value": "F2P",
            "Variable name": "P2P_STATUS"
          },
          "children": [
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "Ask4GP",
                "Variable name": "CURRENT_TASK"
              }
            }
          ]
        }
      ]
    },
    {
      "id": "IF_VARIABLE_IS",
      "customDisplayName": "If variable \u0027P2P_STATUS\u0027 matches F2P",
      "properties": {
        "Filter Value By": {
          "class": "Variable",
          "logic": "NONE",
          "type": "AS_TEXT",
          "operator": "EQUALS",
          "value": "F2P"
        },
        "Variable name": "P2P_STATUS"
      },
      "children": [
        {
          "id": "SET_TO_ITEM_LIVE_PRICE_NAME",
          "properties": {
            "Variable name": "BOND_LIVE_PRICE",
            "Name": "Old school bond"
          }
        },
        {
          "id": "IF_INVENTORY_DOES_NOT_CONTAIN_ANY",
          "properties": {
            "Filter Item By": {
              "class": "Item",
              "logic": "NONE",
              "type": "NAME",
              "operator": "EQUALS",
              "value": "Old school bond",
              "filters": [
                {
                  "class": "Item",
                  "logic": "OR",
                  "type": "NAME",
                  "operator": "EQUALS",
                  "value": "Old school bond (untradeable)"
                }
              ]
            }
          },
          "children": [
            {
              "id": "IF_BANK_DOES_NOT_CONTAIN",
              "customDisplayName": "If bank doesn\u0027t contain match Old school bond",
              "properties": {
                "Filter Item By": {
                  "class": "Item",
                  "logic": "NONE",
                  "type": "NAME",
                  "operator": "EQUALS",
                  "value": "Old school bond (untradeable)",
                  "filters": [
                    {
                      "class": "Item",
                      "logic": "OR",
                      "type": "NAME",
                      "operator": "EQUALS",
                      "value": "Old school bond"
                    }
                  ]
                }
              },
              "children": [
                {
                  "id": "IF_VARIABLE_IS",
                  "customDisplayName": "If variable \u0027COIN_COUNT\u0027 is less than BOND_LIVE_PRICE",
                  "properties": {
                    "Filter Value By": {
                      "class": "Variable",
                      "logic": "NONE",
                      "type": "AS_NUMBER",
                      "operator": "LESS_THAN",
                      "value": "mul(v(BOND_LIVE_PRICE), 1.15)"
                    },
                    "Variable name": "COIN_COUNT"
                  },
                  "children": [
                    {
                      "id": "SET_VARIABLE",
                      "properties": {
                        "Value": "add(mul(v(BOND_LIVE_PRICE), 1.16), v(MULE_GIVE))",
                        "Variable name": "BOND_5M"
                      },
                      "children": [
                        {
                          "id": "SET_VARIABLE",
                          "properties": {
                            "Value": "Bond-Up",
                            "Variable name": "CURRENT_TASK"
                          }
                        },
                        {
                          "id": "SET_VARIABLE",
                          "properties": {
                            "Value": "sub(v(BOND_5M), v(COIN_COUNT))",
                            "Variable name": "TRADE_AMOUNT"
                          },
                          "children": [
                            {
                              "id": "CUSTOM_410c42c3-12ac-4830-9b14-01b00fe4a5cb",
                              "children": [
                                {
                                  "id": "PAUSE_ITEM_TRACKER"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "SET_VARIABLE",
                  "properties": {
                    "Value": "Buy-Bond",
                    "Variable name": "CURRENT_TASK"
                  }
                },
                {
                  "id": "CUSTOM_71ab7dac-7c9c-4740-b639-82b041314160"
                },
                {
                  "id": "IF_VARIABLE_IS",
                  "customDisplayName": "If variable \u0027COIN_COUNT\u0027 is Greater than or equal to BOND_LIVE_PRICE",
                  "properties": {
                    "Filter Value By": {
                      "class": "Variable",
                      "logic": "NONE",
                      "type": "AS_NUMBER",
                      "operator": "GREATER_THAN_OR_EQUAL",
                      "value": "mul(v(BOND_LIVE_PRICE), 1.15)"
                    },
                    "Variable name": "COIN_COUNT"
                  },
                  "children": [
                    {
                      "id": "CUSTOM_7c34cb9f-cec9-45f1-81de-7dba6eb0595e",
                      "children": [
                        {
                          "id": "BANK_WITHDRAW_ALL_ITEM",
                          "customDisplayName": "Withdraw all Coins",
                          "properties": {
                            "Filter Item By": {
                              "class": "Item",
                              "logic": "NONE",
                              "type": "NAME",
                              "operator": "EQUALS",
                              "value": "Coins"
                            }
                          },
                          "children": [
                            {
                              "id": "CUSTOM_97d9d111-9283-408f-b7a0-d99aaaae41df",
                              "children": [
                                {
                                  "id": "CLOSE_BANK",
                                  "children": [
                                    {
                                      "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                                      "children": [
                                        {
                                          "id": "IF_BANK_IS_NOT_OPEN"
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "id": "CUSTOM_621c517e-383e-4e00-aab9-d5955f5b863c",
                      "children": [
                        {
                          "id": "CANCEL_ALL_OFFERS",
                          "children": [
                            {
                              "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                              "properties": {
                                "Max time (seconds)": "3"
                              },
                              "children": [
                                {
                                  "id": "IF_GRAND_EXCHANGE_READY_TO_COLLECT"
                                }
                              ]
                            },
                            {
                              "id": "COLLECT_TO_BANK_GRAND_EXCHANGE",
                              "children": [
                                {
                                  "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                                  "children": [
                                    {
                                      "id": "IF_ANY_SLOT_IS_EMPTY"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": "IF_OFFER_DOES_NOT_EXIST",
                          "properties": {
                            "Filter Item By": {
                              "class": "Item",
                              "logic": "NONE",
                              "type": "NAME",
                              "operator": "EQUALS",
                              "value": "Old school bond"
                            }
                          },
                          "children": [
                            {
                              "id": "BUY_ITEM_GRAND_EXCHANGE",
                              "customDisplayName": "Buy item Old school bond by name for mul(v(BOND_LIVE_PRICE), 1.15)",
                              "properties": {
                                "Item Name": "Old school bond",
                                "Price": "mul(v(BOND_LIVE_PRICE), 1.15)",
                                "Amount": "1"
                              },
                              "children": [
                                {
                                  "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                                  "customDisplayName": "Sleep until inside is true",
                                  "properties": {
                                    "Max time (seconds)": ""
                                  },
                                  "children": [
                                    {
                                      "id": "IF_GRAND_EXCHANGE_READY_TO_COLLECT"
                                    }
                                  ]
                                },
                                {
                                  "id": "IF_GRAND_EXCHANGE_READY_TO_COLLECT",
                                  "children": [
                                    {
                                      "id": "COLLECT_GRAND_EXCHANGE",
                                      "children": [
                                        {
                                          "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                                          "children": [
                                            {
                                              "id": "IF_INVENTORY_CONTAINS_ANY",
                                              "properties": {
                                                "Filter Item By": {
                                                  "class": "Item",
                                                  "logic": "NONE",
                                                  "type": "NAME",
                                                  "operator": "EQUALS",
                                                  "value": "Old school bond (untradeable)",
                                                  "filters": [
                                                    {
                                                      "class": "Item",
                                                      "logic": "OR",
                                                      "type": "NAME",
                                                      "operator": "EQUALS",
                                                      "value": "Old school bond"
                                                    }
                                                  ]
                                                }
                                              }
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            },
                            {
                              "id": "ELSE_BRANCH",
                              "children": [
                                {
                                  "id": "IF_GAME_MESSAGE_RECEIVED_MATCHES",
                                  "properties": {
                                    "Filter Message": {
                                      "class": "Message",
                                      "logic": "NONE",
                                      "type": "TEXT",
                                      "operator": "CONTAINS",
                                      "value": "That offer costs"
                                    }
                                  },
                                  "children": [
                                    {
                                      "id": "PRESS_ESCAPE",
                                      "children": [
                                        {
                                          "id": "DISABLE_LOGIN_SOLVER"
                                        },
                                        {
                                          "id": "LOGOUT",
                                          "children": [
                                            {
                                              "id": "SHOW_DIALOG_MESSAGE",
                                              "properties": {
                                                "Message": "Muling failed. Either your mule didn\u0027t have enough for bond, or your account didn\u0027t trade successfull. If your mule had enough, please report this issue to our discord bug-reports section. Thank-you!"
                                              },
                                              "children": [
                                                {
                                                  "id": "PAUSE_SCRIPT"
                                                }
                                              ]
                                            }
                                          ]
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": "ELSE_BRANCH",
                          "children": [
                            {
                              "id": "IF_GRAND_EXCHANGE_READY_TO_COLLECT",
                              "children": [
                                {
                                  "id": "COLLECT_GRAND_EXCHANGE",
                                  "children": [
                                    {
                                      "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                                      "children": [
                                        {
                                          "id": "IF_INVENTORY_CONTAINS_ANY",
                                          "properties": {
                                            "Filter Item By": {
                                              "class": "Item",
                                              "logic": "NONE",
                                              "type": "NAME",
                                              "operator": "EQUALS",
                                              "value": "Old school bond (untradeable)",
                                              "filters": [
                                                {
                                                  "class": "Item",
                                                  "logic": "OR",
                                                  "type": "NAME",
                                                  "operator": "EQUALS",
                                                  "value": "Old school bond"
                                                }
                                              ]
                                            }
                                          }
                                        }
                                      ]
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "id": "CLOSE_GRAND_EXCHANGE",
                          "children": [
                            {
                              "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                              "children": [
                                {
                                  "id": "IF_GRAND_EXCHANGE_IS_NOT_OPEN"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "ELSE_BRANCH",
                  "children": [
                    {
                      "id": "PRESS_ESCAPE",
                      "children": [
                        {
                          "id": "DISABLE_LOGIN_SOLVER"
                        },
                        {
                          "id": "LOGOUT",
                          "children": [
                            {
                              "id": "SHOW_DIALOG_MESSAGE",
                              "properties": {
                                "Message": "Muling failed. Either your mule didn\u0027t have enough for bond, or your account didn\u0027t trade successfull. If your mule had enough, please report this issue to our discord bug-reports section. Thank-you!"
                              },
                              "children": [
                                {
                                  "id": "PAUSE_SCRIPT"
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "Bond-Up!",
                "Variable name": "CURRENT_TASK"
              }
            },
            {
              "id": "IF_BANK_CONTAINS",
              "customDisplayName": "If bank contains Old school bond",
              "properties": {
                "Filter Item By": {
                  "class": "Item",
                  "logic": "NONE",
                  "type": "NAME",
                  "operator": "EQUALS",
                  "value": "Old school bond",
                  "filters": [
                    {
                      "class": "Item",
                      "logic": "OR",
                      "type": "NAME",
                      "operator": "EQUALS",
                      "value": "Old school bond (untradeable)"
                    }
                  ]
                }
              },
              "children": [
                {
                  "id": "CUSTOM_7c34cb9f-cec9-45f1-81de-7dba6eb0595e",
                  "children": [
                    {
                      "id": "BANK_WITHDRAW_ITEM",
                      "customDisplayName": "Withdraw Old school bond",
                      "properties": {
                        "Filter Item By": {
                          "class": "Item",
                          "logic": "NONE",
                          "type": "NAME",
                          "operator": "EQUALS",
                          "value": "Old school bond",
                          "filters": [
                            {
                              "class": "Item",
                              "logic": "OR",
                              "type": "NAME",
                              "operator": "EQUALS",
                              "value": "Old school bond (untradeable)"
                            }
                          ]
                        },
                        "Amount": "1"
                      },
                      "children": [
                        {
                          "id": "CLOSE_BANK",
                          "children": [
                            {
                              "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                              "properties": {
                                "Max time (seconds)": "b"
                              },
                              "children": [
                                {
                                  "id": "IF_BANK_IS_NOT_OPEN"
                                }
                              ]
                            },
                            {
                              "id": "IF_INVENTORY_COUNT",
                              "properties": {
                                "count": {
                                  "class": "Number",
                                  "operator": "GREATER_THAN",
                                  "value": "0"
                                },
                                "Filter Item By": {
                                  "class": "Item",
                                  "logic": "NONE",
                                  "type": "NAME",
                                  "operator": "EQUALS",
                                  "value": "Coins"
                                }
                              },
                              "children": [
                                {
                                  "id": "SET_VARIABLE",
                                  "properties": {
                                    "Value": "lastOutput()",
                                    "Variable name": "COIN_COUNT"
                                  }
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "id": "SET_VARIABLE",
          "properties": {
            "Value": "Bonding-Up!",
            "Variable name": "CURRENT_TASK"
          }
        },
        {
          "id": "PAUSE_ITEM_TRACKER"
        },
        {
          "id": "IF_INVENTORY_CONTAINS_ANY",
          "properties": {
            "Filter Item By": {
              "class": "Item",
              "logic": "NONE",
              "type": "NAME",
              "operator": "EQUALS",
              "value": "Old school bond (untradeable)",
              "filters": [
                {
                  "class": "Item",
                  "logic": "OR",
                  "type": "NAME",
                  "operator": "EQUALS",
                  "value": "Old school bond"
                }
              ]
            }
          },
          "children": [
            {
              "id": "REDEEM_BONDS",
              "properties": {
                "Amount": "1"
              },
              "children": [
                {
                  "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                  "properties": {
                    "Max time (seconds)": "30"
                  },
                  "children": [
                    {
                      "id": "IF_IN_DIALOGUE"
                    }
                  ]
                },
                {
                  "id": "IF_IN_DIALOGUE",
                  "children": [
                    {
                      "id": "IF_CAN_CONTINUE",
                      "children": [
                        {
                          "id": "PRESS_SPACEBAR"
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "QUICK_HOP_TO_RANDOM_WORLD",
                  "properties": {
                    "Filter World By": {
                      "class": "World",
                      "logic": "NONE",
                      "type": "WORLD_IS_MEMBERS",
                      "operator": "EQUALS",
                      "filters": [
                        {
                          "class": "World",
                          "logic": "AND",
                          "type": "WORLD_IS_NORMAL",
                          "operator": "EQUALS"
                        },
                        {
                          "class": "World",
                          "logic": "AND",
                          "type": "WORLD_IS_NOT_PVP",
                          "operator": "EQUALS"
                        },
                        {
                          "class": "World",
                          "logic": "AND",
                          "type": "WORLD_MINIMUM_LEVEL",
                          "operator": "LESS_THAN",
                          "value": "1"
                        }
                      ]
                    }
                  },
                  "children": [
                    {
                      "id": "IF_MEMBERSHIP_LEFT_IS",
                      "properties": {
                        "days": {
                          "class": "Number",
                          "operator": "GREATER_THAN",
                          "value": "0"
                        }
                      },
                      "children": [
                        {
                          "id": "SET_VARIABLE",
                          "properties": {
                            "Value": "Member",
                            "Variable name": "P2P_STATUS"
                          }
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "SET_VARIABLE",
                  "properties": {
                    "Value": "Hop2P2P",
                    "Variable name": "CURRENT_TASK"
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "CUSTOM_7c34cb9f-cec9-45f1-81de-7dba6eb0595e",
      "children": [
        {
          "id": "BANK_DEPOSIT_ALL_MATCHING_ITEMS",
          "properties": {
            "Filter Item By": {
              "class": "Item",
              "logic": "NONE",
              "type": "NAME",
              "operator": "EQUALS",
              "value": "Coins"
            }
          }
        },
        {
          "id": "RESUME_ITEM_TRACKER"
        }
      ]
    }
  ]
}
