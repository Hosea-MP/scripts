{
  "sleep": "500",
  "name": "Herb_Cleaner",
  "version": 1.0,
  "metadata": {
    "network-id": "97",
    "network-downloaded-at": "1721665286167"
  },
  "actions": [
    {
      "id": "IF_FIRST_RUN",
      "children": [
        {
          "id": "COMMENT",
          "properties": {
            "Comment": "Variables"
          },
          "children": [
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "35",
                "Variable name": "amount_to_sleep_mean"
              }
            },
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "25",
                "Variable name": "amount_to_sleep_variance"
              }
            },
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "4",
                "Variable name": "number_per_tick"
              }
            }
          ]
        },
        {
          "id": "COMMENT",
          "properties": {
            "Comment": "Constants"
          },
          "children": [
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "199,201,203,205,207,209,211,213,215,217,219,2485,3049,3051",
                "Variable name": "grimy_herbs"
              }
            }
          ]
        }
      ]
    },
    {
      "id": "IF_INVENTORY_CONTAINS_ANY",
      "properties": {
        "Filter Item By": {
          "class": "Item",
          "logic": "NONE",
          "type": "ID",
          "operator": "IS_IN_LIST",
          "value": "v(grimy_herbs)"
        }
      },
      "children": [
        {
          "id": "DELETE_VARIABLE",
          "properties": {
            "Variable name": "herbs_to_clean"
          }
        },
        {
          "id": "SET_VARIABLE",
          "properties": {
            "Value": "0",
            "Variable name": "iteration"
          }
        },
        {
          "id": "ADD_INVENTORY_ITEMS_TO_LIST",
          "properties": {
            "Filter Item By": {
              "class": "Item",
              "logic": "NONE",
              "type": "ID",
              "operator": "IS_IN_LIST",
              "value": "v(grimy_herbs)"
            },
            "List name": "herbs_to_clean"
          }
        },
        {
          "id": "SET_VARIABLE_TO_GAME_TICK",
          "properties": {
            "Variable name": "check_tick"
          }
        },
        {
          "id": "FOR_EACH_IN_LIST",
          "properties": {
            "List name": "herbs_to_clean"
          },
          "children": [
            {
              "id": "INTERACT_WITH_INVENTORY_ITEM",
              "properties": {
                "Filter Item By": {
                  "class": "Item",
                  "logic": "NONE",
                  "type": "IS_LAST_OUTPUT",
                  "operator": "EQUALS"
                },
                "Action": "Clean"
              },
              "children": [
                {
                  "id": "IF_VARIABLE_IS",
                  "properties": {
                    "Filter Value By": {
                      "class": "Variable",
                      "logic": "NONE",
                      "type": "AS_NUMBER",
                      "operator": "GREATER_THAN",
                      "value": "0"
                    },
                    "Variable name": "amount_to_sleep_mean"
                  },
                  "children": [
                    {
                      "id": "SLEEP_NORMAL_DISTRIBUTION",
                      "properties": {
                        "Mean": "v(amount_to_sleep_mean)",
                        "Variance": "v(amount_to_sleep_variance)"
                      }
                    }
                  ]
                }
              ]
            },
            {
              "id": "ADD_TO_VARIABLE",
              "properties": {
                "Variable name": "iteration",
                "By": "1"
              }
            },
            {
              "id": "IF_VALUE_IS",
              "properties": {
                "Value": "mod(v(iteration),v(number_per_tick))",
                "Filter By": {
                  "class": "Variable",
                  "logic": "NONE",
                  "type": "AS_NUMBER",
                  "operator": "EQUALS",
                  "value": "0"
                }
              },
              "children": [
                {
                  "id": "SET_VARIABLE_TO_GAME_TICK",
                  "properties": {
                    "Variable name": "cur_tick"
                  }
                },
                {
                  "id": "LOG",
                  "properties": {
                    "Message": "start: v(check_tick) current:v(cur_tick)"
                  }
                },
                {
                  "id": "IF_VARIABLE_IS",
                  "properties": {
                    "Filter Value By": {
                      "class": "Variable",
                      "logic": "NONE",
                      "type": "AS_TEXT",
                      "operator": "EQUALS",
                      "value": "v(check_tick)"
                    },
                    "Variable name": "cur_tick"
                  },
                  "children": [
                    {
                      "id": "SLEEP_UNTIL_GAME_TICK"
                    },
                    {
                      "id": "LOG",
                      "properties": {
                        "Message": "sleeping until next tick"
                      }
                    }
                  ]
                },
                {
                  "id": "SET_VARIABLE_TO_GAME_TICK",
                  "properties": {
                    "Variable name": "check_tick"
                  }
                }
              ]
            }
          ]
        }
      ]
    },
    {
      "id": "ELSE_BRANCH",
      "children": [
        {
          "id": "IF_BANK_IS_OPEN",
          "children": [
            {
              "id": "BANK_DEPOSIT_ALL"
            },
            {
              "id": "SLEEP_NORMAL_DISTRIBUTION",
              "properties": {
                "Mean": "500",
                "Variance": "200"
              }
            },
            {
              "id": "IF_BANK_CONTAINS",
              "properties": {
                "Filter Item By": {
                  "class": "Item",
                  "logic": "NONE",
                  "type": "ID",
                  "operator": "IS_IN_LIST",
                  "value": "v(grimy_herbs)"
                }
              },
              "children": [
                {
                  "id": "BANK_WITHDRAW_ALL_ITEM",
                  "properties": {
                    "Filter Item By": {
                      "class": "Item",
                      "logic": "NONE",
                      "type": "ID",
                      "operator": "IS_IN_LIST",
                      "value": "v(grimy_herbs)"
                    }
                  }
                }
              ]
            },
            {
              "id": "ELSE_BRANCH",
              "children": [
                {
                  "id": "STOP_SCRIPT",
                  "customDisplayName": "Out of Herbs"
                }
              ]
            },
            {
              "id": "SLEEP_NORMAL_DISTRIBUTION",
              "properties": {
                "Mean": "500",
                "Variance": "200"
              }
            },
            {
              "id": "CLOSE_BANK"
            }
          ]
        },
        {
          "id": "ELSE_BRANCH",
          "children": [
            {
              "id": "OPEN_BANK",
              "children": [
                {
                  "id": "SLEEP_NORMAL_DISTRIBUTION",
                  "properties": {
                    "Mean": "150",
                    "Variance": "50"
                  }
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}
