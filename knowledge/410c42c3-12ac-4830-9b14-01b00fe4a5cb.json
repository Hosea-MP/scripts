{
  "id": "410c42c3-12ac-4830-9b14-01b00fe4a5cb",
  "name": "Muling \u003e Take From Mule",
  "description": "Will communicate on ports: 50808 \u0026 50809 to speak with the mule account to Take GP From Mule.",
  "parameters": "",
  "fail": false,
  "actions": [
    {
      "id": "IF_VARIABLE_IS",
      "properties": {
        "Filter Value By": {
          "class": "Variable",
          "logic": "NONE",
          "type": "AS_TEXT",
          "operator": "DOES_NOT_EQUAL",
          "value": "null"
        },
        "Variable name": "MULE_NAME"
      },
      "children": [
        {
          "id": "SET_VARIABLE_TO_LOCAL_NAME",
          "properties": {
            "Variable name": "OUR_NAME"
          },
          "children": [
            {
              "id": "DISABLE_MENU_MANIPULATION",
              "children": [
                {
                  "id": "DISABLE_NO_CLICK_WALK"
                }
              ]
            }
          ]
        },
        {
          "id": "IF_VARIABLE_IS",
          "properties": {
            "Filter Value By": {
              "class": "Variable",
              "logic": "NONE",
              "type": "AS_TEXT",
              "operator": "EQUALS",
              "value": "Bond-Up"
            },
            "Variable name": "CURRENT_TASK"
          },
          "children": [
            {
              "id": "SET_VARIABLE",
              "customDisplayName": "Set variable v(TRADE_AMOUNT) to v(TRADE_AMOUNT)",
              "properties": {
                "Value": "mul(v(TRADE_AMOUNT), 1.15)",
                "Variable name": "TRADE_AMOUNT"
              }
            }
          ]
        },
        {
          "id": "ELSE_BRANCH",
          "children": [
            {
              "id": "IF_VARIABLE_IS",
              "properties": {
                "Filter Value By": {
                  "class": "Variable",
                  "logic": "NONE",
                  "type": "AS_NUMBER",
                  "operator": "GREATER_THAN",
                  "value": "1"
                },
                "Variable name": "COIN_CHECK"
              },
              "children": [
                {
                  "id": "IF_VARIABLE_IS",
                  "properties": {
                    "Filter Value By": {
                      "class": "Variable",
                      "logic": "NONE",
                      "type": "AS_NUMBER",
                      "operator": "LESS_THAN",
                      "value": "mul(v(COIN_CHECK), 1.50)"
                    },
                    "Variable name": "COIN_COUNT"
                  },
                  "children": [
                    {
                      "id": "SET_VARIABLE",
                      "customDisplayName": "Set variable v(TRADE_AMOUNT) to add(sub(v(COIN_CHECK), v(COIN_COUNT)), v(MULE_GIVE))",
                      "properties": {
                        "Value": "sub(v(COIN_CHECK), v(COIN_COUNT))",
                        "Variable name": "TRADE_AMOUNT"
                      },
                      "children": [
                        {
                          "id": "IF_VARIABLE_IS",
                          "properties": {
                            "Filter Value By": {
                              "class": "Variable",
                              "logic": "NONE",
                              "type": "AS_NUMBER",
                              "operator": "LESS_THAN",
                              "value": "v(MULE_TAKE)"
                            },
                            "Variable name": "TRADE_AMOUNT"
                          },
                          "children": [
                            {
                              "id": "SET_VARIABLE",
                              "customDisplayName": "Set variable v(TRADE_AMOUNT) to v(MULE_TAKE)",
                              "properties": {
                                "Value": "v(MULE_TAKE)",
                                "Variable name": "TRADE_AMOUNT"
                              }
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "ELSE_BRANCH",
              "children": [
                {
                  "id": "IF_VARIABLE_IS",
                  "customDisplayName": "If variable \u0027COIN_COUNT\u0027 is less than v(MULE_GIVE)",
                  "properties": {
                    "Filter Value By": {
                      "class": "Variable",
                      "logic": "NONE",
                      "type": "AS_NUMBER",
                      "operator": "LESS_THAN",
                      "value": "v(MULE_GIVE)"
                    },
                    "Variable name": "COIN_COUNT"
                  },
                  "children": [
                    {
                      "id": "SET_VARIABLE",
                      "customDisplayName": "Set variable v(TRADE_AMOUNT) to v(MULE_GIVE)",
                      "properties": {
                        "Value": "v(MULE_GIVE)",
                        "Variable name": "TRADE_AMOUNT"
                      }
                    }
                  ]
                },
                {
                  "id": "ELSE_BRANCH",
                  "children": [
                    {
                      "id": "SET_VARIABLE",
                      "properties": {
                        "Value": "0",
                        "Variable name": "TRADE_AMOUNT"
                      }
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "id": "IF_VARIABLE_IS_NOT_SET",
          "properties": {
            "Variable name": "MULED_AMOUNT"
          },
          "children": [
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "0",
                "Variable name": "MULED_AMOUNT"
              }
            }
          ]
        },
        {
          "id": "IF_VARIABLE_IS",
          "properties": {
            "Filter Value By": {
              "class": "Variable",
              "logic": "NONE",
              "type": "AS_NUMBER",
              "operator": "GREATER_THAN_OR_EQUAL",
              "value": "1"
            },
            "Variable name": "TRADE_AMOUNT"
          },
          "children": [
            {
              "id": "PAUSE_ITEM_TRACKER"
            },
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "Walking to GE",
                "Variable name": "CURRENT_TASK"
              }
            },
            {
              "id": "CUSTOM_e7889949-c7d5-4cdb-8f10-d25eb839ef97"
            },
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "Hop-To-Mule",
                "Variable name": "CURRENT_TASK"
              }
            },
            {
              "id": "SEND_MESSAGE_TO_PORT",
              "customDisplayName": "Send v(OUR_NAME) to port 50808",
              "properties": {
                "Message": "v(OUR_NAME)",
                "Host": "50808"
              }
            },
            {
              "id": "SEND_MESSAGE_TO_PORT",
              "customDisplayName": "Send v(TRADE_AMOUNT) to port 50809",
              "properties": {
                "Message": "floor(v(TRADE_AMOUNT))",
                "Host": "50809"
              }
            },
            {
              "id": "CUSTOM_c8866571-30d1-462d-98a7-a91e25600263"
            },
            {
              "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
              "properties": {
                "Max time (seconds)": ""
              },
              "children": [
                {
                  "id": "IF_PLAYER_EXISTS",
                  "properties": {
                    "Filter Player By": {
                      "class": "Player",
                      "logic": "NONE",
                      "type": "NAME",
                      "operator": "EQUALS",
                      "value": "v(MULE_NAME)"
                    }
                  }
                }
              ]
            },
            {
              "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
              "properties": {
                "Max time (seconds)": "600"
              },
              "children": [
                {
                  "id": "IF_GAME_MESSAGE_RECEIVED_MATCHES",
                  "properties": {
                    "Filter Message": {
                      "class": "Message",
                      "logic": "NONE",
                      "type": "FROM",
                      "operator": "EQUALS",
                      "value": "v(MULE_NAME)",
                      "filters": [
                        {
                          "class": "Message",
                          "logic": "AND",
                          "type": "IS_TRADE_MESSAGE",
                          "operator": "EQUALS"
                        }
                      ]
                    }
                  }
                }
              ]
            },
            {
              "id": "IF_TRADE_IS_NOT_OPEN",
              "children": [
                {
                  "id": "SET_VARIABLE",
                  "properties": {
                    "Value": "Waiting4Trade",
                    "Variable name": "CURRENT_TASK"
                  }
                },
                {
                  "id": "CUSTOM_59b0d6d5-80ef-4fde-a09a-4da2e972c4b2"
                },
                {
                  "id": "ENABLE_MENU_MANIPULATION"
                },
                {
                  "id": "TRADE_PLAYER",
                  "properties": {
                    "Filter Player By": {
                      "class": "Player",
                      "logic": "NONE",
                      "type": "NAME",
                      "operator": "EQUALS",
                      "value": "v(MULE_NAME)"
                    }
                  },
                  "children": [
                    {
                      "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                      "properties": {
                        "Max time (seconds)": ""
                      },
                      "children": [
                        {
                          "id": "IF_TRADE_IS_OPEN",
                          "customDisplayName": "If trade screen is open"
                        }
                      ]
                    }
                  ]
                },
                {
                  "id": "DISABLE_MENU_MANIPULATION"
                }
              ]
            },
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "Trading Mule",
                "Variable name": "CURRENT_TASK"
              }
            },
            {
              "id": "IF_TRADE_IS_OPEN",
              "children": [
                {
                  "id": "IF_TRADING_WITH_NAME_EQUALS",
                  "customDisplayName": "If trading with name equals v(MULE_NAME)",
                  "properties": {
                    "Name": "v(MULE_NAME)"
                  },
                  "children": [
                    {
                      "id": "IF_FIRST_TRADE_SCREEN_IS_OPEN",
                      "customDisplayName": "If first trade screen is open",
                      "children": [
                        {
                          "id": "CUSTOM_59b0d6d5-80ef-4fde-a09a-4da2e972c4b2"
                        },
                        {
                          "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                          "properties": {
                            "Max time (seconds)": ""
                          },
                          "children": [
                            {
                              "id": "IF_CAN_ACCEPT_OFFER"
                            },
                            {
                              "id": "IF_THEY_HAVE_ACCEPTED_TRADE"
                            }
                          ]
                        },
                        {
                          "id": "IF_THEIR_OFFER_VALUE_IS",
                          "customDisplayName": "If their offer value is greater than 0",
                          "properties": {
                            "value": {
                              "class": "Number",
                              "operator": "GREATER_THAN",
                              "value": "0"
                            }
                          },
                          "children": [
                            {
                              "id": "ADD_TO_VARIABLE",
                              "properties": {
                                "Variable name": "COIN_COUNT",
                                "By": "lastOutput()"
                              }
                            }
                          ]
                        },
                        {
                          "id": "IF_THEIR_OFFER_VALUE_IS",
                          "customDisplayName": "If their offer value is greater than 0",
                          "properties": {
                            "value": {
                              "class": "Number",
                              "operator": "GREATER_THAN",
                              "value": "0"
                            }
                          },
                          "children": [
                            {
                              "id": "SUBTRACT_FROM_VARIABLE",
                              "customDisplayName": "Subtract from variable \u0027v(MULED_AMOUNT)\u0027 by v(TRADE_AMOUNT)",
                              "properties": {
                                "Variable name": "v(MULED_AMOUNT)",
                                "By": "lastOutput()"
                              }
                            }
                          ]
                        },
                        {
                          "id": "IF_THEY_HAVE_ACCEPTED_TRADE",
                          "children": [
                            {
                              "id": "ACCEPT_TRADE",
                              "children": [
                                {
                                  "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                                  "properties": {
                                    "Max time (seconds)": ""
                                  },
                                  "children": [
                                    {
                                      "id": "IF_SECOND_TRADE_SCREEN_IS_OPEN"
                                    }
                                  ]
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "id": "IF_SECOND_TRADE_SCREEN_IS_OPEN",
                      "children": [
                        {
                          "id": "ACCEPT_TRADE",
                          "children": [
                            {
                              "id": "SLEEP_UNTIL_INSIDE_IS_TRUE",
                              "properties": {
                                "Max time (seconds)": ""
                              },
                              "children": [
                                {
                                  "id": "IF_TRADE_IS_NOT_OPEN"
                                }
                              ]
                            },
                            {
                              "id": "CUSTOM_59b0d6d5-80ef-4fde-a09a-4da2e972c4b2"
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "id": "SET_VARIABLE",
              "properties": {
                "Value": "World Hopping",
                "Variable name": "CURRENT_TASK"
              }
            },
            {
              "id": "RESUME_ITEM_TRACKER"
            }
          ]
        },
        {
          "id": "IF_MEMBERSHIP_LEFT_IS",
          "properties": {
            "days": {
              "class": "Number",
              "operator": "GREATER_THAN_OR_EQUALS",
              "value": "1"
            }
          },
          "children": [
            {
              "id": "CUSTOM_d4d09f20-4af6-4e9f-b67c-f7c450b6a2b0"
            }
          ]
        },
        {
          "id": "IF_MEMBERSHIP_LEFT_IS",
          "properties": {
            "days": {
              "class": "Number",
              "operator": "EQUALS",
              "value": "0"
            }
          },
          "children": [
            {
              "id": "CUSTOM_d5971488-41b4-4c6f-9a14-a44e7e6699e8"
            }
          ]
        }
      ]
    }
  ]
}
