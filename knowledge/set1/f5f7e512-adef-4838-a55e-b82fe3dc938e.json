{"id":"f5f7e512-adef-4838-a55e-b82fe3dc938e","name":"Bank > Withdraw All Items","description":"Will withdraw all of each item added to ITEM_LIST with ITEM_CHECK used to make sure it's withdrawn.","parameters":"","fail":false,"actions":[{"id":"SET_VARIABLE","properties":{"Value":"WithdrawAll","Variable name":"CURRENT_TASK"}},{"id":"IF_MENU_MANIPULATION_IS_NOT_ENABLED","children":[{"id":"ENABLE_MENU_MANIPULATION"}]},{"id":"IF_BANK_IS_NOT_OPEN","children":[{"id":"OPEN_BANK","children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","children":[{"id":"IF_BANK_IS_OPEN"}]}]}]},{"id":"IF_BANK_IS_OPEN","children":[{"id":"SET_WITHDRAW_MODE_NOTED"},{"id":"FOR_EACH_IN_LIST","customDisplayName":"For each in list ITEM_LIST","properties":{"List name":"ITEM_LIST","Reverse order":false,"Random order":false},"children":[{"id":"SET_VARIABLE_TO_LAST_OUTPUT","properties":{"Variable name":"ITEM_CHECK"},"children":[{"id":"IF_VARIABLE_IS_SET","properties":{"Variable name":"v(ITEM_CHECK)_RESTOCK"},"children":[{"id":"IF_BANK_COUNT","properties":{"count":{"class":"Number","operator":"GREATER_THAN","value":"v(v(ITEM_CHECK)_RESTOCK)"},"Filter Item By":{"class":"Item","logic":"NONE","type":"NAME","operator":"EQUALS","value":"v(ITEM_CHECK)"}},"children":[{"id":"SET_VARIABLE_TO_LAST_OUTPUT","properties":{"Variable name":"v(ITEM_CHECK)_COUNT"},"children":[{"id":"BANK_WITHDRAW_ITEM","properties":{"Filter Item By":{"class":"Item","logic":"NONE","type":"NAME","operator":"EQUALS","value":"v(ITEM_CHECK)"},"Amount":"sub(v(v(ITEM_CHECK)_COUNT), v(v(ITEM_CHECK)_RESTOCK))"}}]}]}]},{"id":"ELSE_BRANCH","children":[{"id":"IF_INVENTORY_DOES_NOT_CONTAIN_ANY","properties":{"Filter Item By":{"class":"Item","logic":"NONE","type":"NAME","operator":"EQUALS","value":"v(ITEM_CHECK)"}},"children":[{"id":"BANK_WITHDRAW_ALL_ITEM","properties":{"Filter Item By":{"class":"Item","logic":"NONE","type":"NAME","operator":"EQUALS","value":"v(ITEM_CHECK)"}}}]}]}]}]}]},{"id":"CLOSE_BANK","children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","children":[{"id":"IF_BANK_IS_NOT_OPEN","customDisplayName":"If bank is not open"}]}]},{"id":"IF_MENU_MANIPULATION_IS_ENABLED","children":[{"id":"DISABLE_MENU_MANIPULATION"}]}]}