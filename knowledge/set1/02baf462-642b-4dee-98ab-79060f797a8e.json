{"id":"02baf462-642b-4dee-98ab-79060f797a8e","name":"Utility > Threads > Anti-Pker Logout","description":"Will imediately log out if player can attack us, has a skull, or is interacting with us.","parameters":"","fail":false,"actions":[{"id":"IF_VARIABLE_IS_NOT_SET","properties":{"Variable name":"PK_DEATHS"},"children":[{"id":"SET_VARIABLE","properties":{"Value":"0","Variable name":"PK_DEATHS"}}]},{"id":"IF_THREAD_IS_NOT_RUNNING","properties":{"Thread name":"Anti-Pker Logout"},"children":[{"id":"START_NEW_THREAD","properties":{"Thread name":"Anti-Pker Logout","Repeat until stopped":true,"Sleep between runs (ms)":"10"},"children":[{"id":"IF_WILDERNESS_LEVEL_IS","properties":{"level":{"class":"Number","operator":"GREATER_THAN_OR_EQUALS","value":"1"}},"children":[{"id":"SLEEP_UNTIL_ANY_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"120"},"children":[{"id":"IF_PLAYER_EXISTS","properties":{"Filter Player By":{"class":"Player","logic":"NONE","type":"CAN_ATTACK_ME","operator":"EQUALS","filters":[{"class":"Player","logic":"AND","type":"IS_NOT_INTERACTING_WITH_ME","operator":"EQUALS"},{"class":"Player","logic":"AND","type":"NOT_IN_COMBAT","operator":"EQUALS"}]}}},{"id":"IF_PLAYER_EXISTS","properties":{"Filter Player By":{"class":"Player","logic":"NONE","type":"IS_SKULLED","operator":"EQUALS","filters":[{"class":"Player","logic":"AND","type":"CAN_ATTACK_ME","operator":"EQUALS"},{"class":"Player","logic":"AND","type":"IN_COMBAT","operator":"EQUALS"},{"class":"Player","logic":"OR","type":"IS_INTERACTING_WITH_ME","operator":"EQUALS"}]}}}]},{"id":"IF_PLAYER_EXISTS","properties":{"Filter Player By":{"class":"Player","logic":"NONE","type":"CAN_ATTACK_ME","operator":"EQUALS","filters":[{"class":"Player","logic":"AND","type":"IS_NOT_INTERACTING_WITH_ME","operator":"EQUALS"},{"class":"Player","logic":"AND","type":"NOT_IN_COMBAT","operator":"EQUALS"},{"class":"Player","logic":"AND","type":"IS_SKULLED","operator":"EQUALS"}]}},"children":[{"id":"SET_VARIABLE","customDisplayName":"Set variable 'CURRENT_TASK' to 'AntiPkHop'","properties":{"Value":"AntiPkHop","Variable name":"CURRENT_TASK"}},{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"IS_HEALTH_BAR_NOT_VISIBLE","operator":"EQUALS"}},"children":[{"id":"IF_MENU_MANIPULATION_IS_NOT_ENABLED","children":[{"id":"ENABLE_MENU_MANIPULATION"}]},{"id":"WIDGET_INTERACT","properties":{"Action":"Logout","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"548, 50"}},"children":[{"id":"WIDGET_INTERACT","properties":{"Action":"Logout","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"69, 25"}}},{"id":"WIDGET_INTERACT","properties":{"Action":"Logout","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"182, 8"}}}]}]},{"id":"IF_NOT_LOGGED_IN","children":[{"id":"QUICK_HOP_TO_RANDOM_WORLD","properties":{"Filter World By":{"class":"World","logic":"NONE","type":"WORLD_IS_MEMBERS","operator":"EQUALS","filters":[{"class":"World","logic":"AND","type":"WORLD_IS_NOT_PVP","operator":"EQUALS"},{"class":"World","logic":"AND","type":"WORLD_IS_NORMAL","operator":"EQUALS"},{"class":"World","logic":"AND","type":"WORLD_MINIMUM_LEVEL","operator":"LESS_THAN","value":"1"}]}},"children":[{"id":"SLEEP_WHILE_WORLD_HOPPING","customDisplayName":"Sleep while world hopping","children":[{"id":"ADD_TO_VARIABLE","properties":{"By":"1","Variable name":"PK_HOPS"},"children":[{"id":"IF_NO_CLICK_WALK_IS_ENABLED","children":[{"id":"DISABLE_NO_CLICK_WALK"}]},{"id":"IF_MENU_MANIPULATION_IS_ENABLED","children":[{"id":"DISABLE_MENU_MANIPULATION"}]},{"id":"ENABLE_EQUIPMENT_TELEPORTS"}]}]}]}]}]},{"id":"IF_PLAYER_EXISTS","properties":{"Filter Player By":{"class":"Player","logic":"NONE","type":"IS_SKULLED","operator":"EQUALS","filters":[{"class":"Player","logic":"AND","type":"CAN_ATTACK_ME","operator":"EQUALS"},{"class":"Player","logic":"AND","type":"IN_COMBAT","operator":"EQUALS"},{"class":"Player","logic":"OR","type":"IS_INTERACTING_WITH_ME","operator":"EQUALS"}]}},"children":[{"id":"SET_VARIABLE","properties":{"Value":"RunBitchRun!","Variable name":"CURRENT_TASK"}},{"id":"COMMENT","properties":{"Comment":"Prayer"},"children":[{"id":"IF_MENU_MANIPULATION_IS_NOT_ENABLED","children":[{"id":"ENABLE_MENU_MANIPULATION"}]},{"id":"IF_PRAYER_IS_NOT_ACTIVE","properties":{"Prayer":{"class":"Prayer","value":"PROTECT_ITEM"}},"children":[{"id":"IF_SKILL_LEVEL_IS","properties":{"level":{"class":"Number","operator":"GREATER_THAN_OR_EQUALS","value":"25"},"Skill":{"class":"Skill","value":"PRAYER"}},"children":[{"id":"IF_TAB_IS_NOT_OPEN","properties":{"Tab":{"class":"Tab","value":"PRAYER"}},"children":[{"id":"WIDGET_INTERACT","properties":{"Action":"Prayer","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"548, 68"}}}]},{"id":"WIDGET_INTERACT","properties":{"Action":"Activate","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"541, 17"}}}]}]},{"id":"IF_PRAYER_IS_NOT_ACTIVE","properties":{"Prayer":{"class":"Prayer","value":"MYSTIC_MIGHT"}},"children":[{"id":"IF_SKILL_LEVEL_IS","properties":{"level":{"class":"Number","operator":"GREATER_THAN_OR_EQUALS","value":"45"},"Skill":{"class":"Skill","value":"PRAYER"}},"children":[{"id":"IF_TAB_IS_NOT_OPEN","properties":{"Tab":{"class":"Tab","value":"PRAYER"}},"children":[{"id":"WIDGET_INTERACT","properties":{"Action":"Prayer","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"548, 68"}}},{"id":"WIDGET_INTERACT","properties":{"Action":"Activate","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"541, 32"}}}]}]}]},{"id":"IF_PLAYER_EXISTS","customDisplayName":"If Player exists Magic","properties":{"Filter Player By":{"class":"Player","logic":"NONE","type":"IS_WEARING_ITEM_BY_NAME","operator":"CONTAINS","value":"staff","filters":[{"class":"Player","logic":"AND","type":"CAN_ATTACK_ME","operator":"EQUALS"},{"class":"Player","logic":"AND","type":"IS_INTERACTING_WITH_ME","operator":"EQUALS"}]}},"children":[{"id":"IF_PRAYER_IS_NOT_ACTIVE","properties":{"Prayer":{"class":"Prayer","value":"PROTECT_FROM_MAGIC"}},"children":[{"id":"IF_SKILL_LEVEL_IS","properties":{"level":{"class":"Number","operator":"GREATER_THAN_OR_EQUALS","value":"37"},"Skill":{"class":"Skill","value":"PRAYER"}},"children":[{"id":"IF_TAB_IS_NOT_OPEN","properties":{"Tab":{"class":"Tab","value":"PRAYER"}},"children":[{"id":"WIDGET_INTERACT","properties":{"Action":"Prayer","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"548, 68"}}}]},{"id":"WIDGET_INTERACT","properties":{"Action":"Activate","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"541, 21"}}}]}]}]},{"id":"IF_PLAYER_EXISTS","customDisplayName":"If Player exists Ranged","properties":{"Filter Player By":{"class":"Player","logic":"NONE","type":"IS_WEARING_ITEM_BY_NAME","operator":"CONTAINS","value":"bow","filters":[{"class":"Player","logic":"OR","type":"IS_WEARING_ITEM_BY_NAME","operator":"CONTAINS","value":"knife"},{"class":"Player","logic":"OR","type":"NAME","operator":"CONTAINS","value":"dart"},{"class":"Player","logic":"AND","type":"IS_INTERACTING_WITH_ME","operator":"EQUALS"},{"class":"Player","logic":"AND","type":"CAN_ATTACK_ME","operator":"EQUALS"}]}},"children":[{"id":"IF_PRAYER_IS_NOT_ACTIVE","properties":{"Prayer":{"class":"Prayer","value":"PROTECT_FROM_MISSILES"}},"children":[{"id":"IF_SKILL_LEVEL_IS","properties":{"level":{"class":"Number","operator":"GREATER_THAN_OR_EQUALS","value":"40"},"Skill":{"class":"Skill","value":"PRAYER"}},"children":[{"id":"IF_TAB_IS_NOT_OPEN","properties":{"Tab":{"class":"Tab","value":"PRAYER"}},"children":[{"id":"WIDGET_INTERACT","properties":{"Action":"Prayer","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"548, 68"}}}]},{"id":"WIDGET_INTERACT","properties":{"Action":"Activate","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"541, 22"}}}]}]}]},{"id":"IF_PLAYER_EXISTS","customDisplayName":"If Player exists Melee","properties":{"Filter Player By":{"class":"Player","logic":"NONE","type":"IS_WEARING_ITEM_BY_NAME","operator":"EQUALS","value":"sword","filters":[{"class":"Player","logic":"OR","type":"IS_WEARING_ITEM_BY_NAME","operator":"CONTAINS","value":"dagger"},{"class":"Player","logic":"OR","type":"IS_WEARING_ITEM_BY_NAME","operator":"CONTAINS","value":"scimitar"},{"class":"Player","logic":"OR","type":"NAME","operator":"CONTAINS","value":"maul"},{"class":"Player","logic":"AND","type":"CAN_ATTACK_ME","operator":"EQUALS"},{"class":"Player","logic":"AND","type":"IS_INTERACTING_WITH_ME","operator":"EQUALS"}]}},"children":[{"id":"IF_PRAYER_IS_NOT_ACTIVE","properties":{"Prayer":{"class":"Prayer","value":"PROTECT_FROM_MELEE"}},"children":[{"id":"IF_SKILL_LEVEL_IS","properties":{"level":{"class":"Number","operator":"GREATER_THAN_OR_EQUALS","value":"43"},"Skill":{"class":"Skill","value":"PRAYER"}},"children":[{"id":"IF_TAB_IS_NOT_OPEN","properties":{"Tab":{"class":"Tab","value":"PRAYER"}},"children":[{"id":"WIDGET_INTERACT","properties":{"Action":"Prayer","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"548, 68"}}}]},{"id":"WIDGET_INTERACT","properties":{"Action":"Activate","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"541, 23"}}}]}]}]}]},{"id":"COMMENT","properties":{"Comment":"Walker"},"children":[{"id":"IF_NO_CLICK_WALK_IS_NOT_ENABLED","children":[{"id":"ENABLE_NO_CLICK_WALK"}]},{"id":"IF_VARBIT_MATCHES","customDisplayName":"If varbit 4163 (teleblock) is 101","properties":{"value":{"class":"Number","operator":"EQUALS","value":"101"},"Varbit":"4163"},"children":[{"id":"DISABLE_EQUIPMENT_TELEPORTS"}]},{"id":"ELSE_BRANCH","children":[{"id":"ENABLE_EQUIPMENT_TELEPORTS"}]},{"id":"IF_RUN_IS_NOT_ENABLED","children":[{"id":"ENABLE_RUN"}]},{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"NOT_MOVING","operator":"EQUALS"}},"children":[{"id":"WALK_TO_SPECIFIC_BANK","properties":{"Bank":{"class":"BankLocation","value":"GRAND_EXCHANGE"}}}]},{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"MOVING","operator":"EQUALS"}},"children":[{"id":"IF_DISTANCE_TO_DESTINATION_IS","properties":{"distance":{"class":"Number","operator":"LESS_THAN_OR_EQUALS","value":"rand(2, 6)"}},"children":[{"id":"WALK_TO_SPECIFIC_BANK","properties":{"Bank":{"class":"BankLocation","value":"GRAND_EXCHANGE"}}}]}]}]},{"id":"COMMENT","properties":{"Comment":"Logout"},"children":[{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"NOT_IN_COMBAT","operator":"EQUALS","filters":[{"class":"Player","logic":"AND","type":"IS_HEALTH_BAR_NOT_VISIBLE","operator":"EQUALS"}]}},"children":[{"id":"WIDGET_INTERACT","properties":{"Action":"Logout","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"548, 50"}},"children":[{"id":"WIDGET_INTERACT","properties":{"Action":"Logout","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"69, 25"}}},{"id":"WIDGET_INTERACT","properties":{"Action":"Logout","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"182, 8"}}}]}]},{"id":"IF_NOT_LOGGED_IN","children":[{"id":"SET_VARIABLE","customDisplayName":"Set variable 'CURRENT_TASK' to 'AntiPkHop'","properties":{"Value":"AntiPkHop","Variable name":"CURRENT_TASK"}},{"id":"QUICK_HOP_TO_RANDOM_WORLD","properties":{"Filter World By":{"class":"World","logic":"NONE","type":"WORLD_IS_MEMBERS","operator":"EQUALS","filters":[{"class":"World","logic":"AND","type":"WORLD_IS_NOT_PVP","operator":"EQUALS"},{"class":"World","logic":"AND","type":"WORLD_IS_NORMAL","operator":"EQUALS"},{"class":"World","logic":"AND","type":"WORLD_MINIMUM_LEVEL","operator":"LESS_THAN","value":"1"}]}},"children":[{"id":"SLEEP_WHILE_WORLD_HOPPING","customDisplayName":"Sleep while world hopping","children":[{"id":"ADD_TO_VARIABLE","properties":{"By":"1","Variable name":"PK_HOPS"},"children":[{"id":"IF_NO_CLICK_WALK_IS_ENABLED","children":[{"id":"DISABLE_NO_CLICK_WALK"}]},{"id":"IF_MENU_MANIPULATION_IS_ENABLED","children":[{"id":"DISABLE_MENU_MANIPULATION"}]},{"id":"ENABLE_EQUIPMENT_TELEPORTS"}]}]}]}]}]},{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"HEALTH","operator":"EQUALS","value":"0"}},"children":[{"id":"IF_PLAYER_EXISTS","properties":{"Filter Player By":{"class":"Player","logic":"NONE","type":"IS_INTERACTING_WITH_ME","operator":"EQUALS"}},"children":[{"id":"SET_VARIABLE_TO_LAST_OUTPUT","properties":{"Variable name":"PKER_NAME"},"children":[{"id":"IF_WORLD_MATCHES","properties":{"Filter World By":{"class":"World","logic":"NONE","type":"WORLD_POPULATION","operator":"GREATER_THAN_OR_EQUAL","value":"1"}},"children":[{"id":"SET_VARIABLE","properties":{"Value":"lastOutput()","Variable name":"PK_WORLD"}}]},{"id":"ADD_TO_VARIABLE","properties":{"Variable name":"PK_DEATHS","By":"1"},"children":[{"id":"SEND_WEBHOOK_MESSAGE_WITH_SCREENSHOT","properties":{"Message":"Ah shit, you fucking died. This is literally no way to live.\n\nPk Death: v(PK_DEATHS)\n\nPker name: v(PKER_NAME) | Player World: v(PK_WORLD)","URL":"v(WEB_HOOK)"}}]}]}]},{"id":"SUBTRACT_FROM_VARIABLE","properties":{"Variable name":"LOOT_GAINED","By":"add(v(DEATH_COST), v(INVY_LOOT))"},"children":[{"id":"SET_VARIABLE","properties":{"Value":"0","Variable name":"DEATH_COST"},"children":[{"id":"SET_VARIABLE","properties":{"Value":"0","Variable name":"INVY_LOOT"}}]}]},{"id":"IF_MENU_MANIPULATION_IS_ENABLED","children":[{"id":"DISABLE_MENU_MANIPULATION"}]},{"id":"IF_NO_CLICK_WALK_IS_ENABLED","children":[{"id":"DISABLE_NO_CLICK_WALK"}]},{"id":"SLEEP_WHILE_ANIMATING","properties":{"Stopped for (seconds)":"1"}},{"id":"DISABLE_ALL_PRAYERS"}]}]}]},{"id":"ELSE_BRANCH","children":[{"id":"ENABLE_EQUIPMENT_TELEPORTS"}]}]}]}]}