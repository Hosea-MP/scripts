{"id":"76809626-dbb2-426d-9d28-5aec53e49554","name":"Combat > Deaths' Door","description":"[NEED TO EDIT FROM NEW DEATH] Will walk to death's office in lumbridge if game message says we died and claim our stuff back.","parameters":"","fail":false,"actions":[{"id":"DISABLE_DEATHS_DOOR"},{"id":"IF_VARIABLE_IS_NOT_SET","properties":{"Variable name":"LUMBRIDGE"},"children":[{"id":"SET_VARIABLE","properties":{"Value":"3225, 3228, 3205, 3209","Variable name":"LUMBRIDGE"}}]},{"id":"SLEEP_WHILE_MOVING"},{"id":"IF_GAME_MESSAGE_RECEIVED_MATCHES","properties":{"Filter Message":{"class":"Message","logic":"NONE","type":"IS_GAME_MESSAGE","operator":"EQUALS","filters":[{"class":"Message","logic":"AND","type":"TEXT","operator":"EQUALS","value":"Oh dear, you are dead!"},{"class":"Message","logic":"OR","type":"TEXT","operator":"EQUALS","value":"You have items stored in an item retrieval service."},{"class":"Message","logic":"AND","type":"AGE","operator":"EQUALS","value":"120"}]}}},{"id":"OR_BRANCH"},{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"HEALTH","operator":"EQUALS","value":"0"}},"children":[{"id":"SLEEP_WHILE_ANIMATING","properties":{"Stopped for (seconds)":""},"children":[{"id":"SET_VARIABLE","properties":{"Value":"Death Walk","Variable name":"CURRENT_TASK"}}]}]},{"id":"CREATE_LABEL","properties":{"Label":"First Death"},"children":[{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"NOT_IN_AREA","operator":"EQUALS","value":"v(LUMBRIDGE)"}},"children":[{"id":"IF_NPC_EXISTS","properties":{"Filter NPC By":{"class":"NPC","logic":"NONE","type":"NAME","operator":"EQUALS","value":"Death"}},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":""},"children":[{"id":"IF_IN_DIALOGUE"}]},{"id":"IF_IN_DIALOGUE","children":[{"id":"CREATE_LABEL","properties":{"Label":"SkipDeathTalk1"},"children":[{"id":"IF_CAN_CONTINUE","children":[{"id":"PRESS_SPACEBAR","children":[{"id":"SLEEP_BETWEEN","properties":{"Minimum":"600","Maximum":"800"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"2"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"GO_TO_LABEL","properties":{"Label":"SkipDeathTalk1"}}]}]}]}]},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"10"},"children":[{"id":"IF_OPTIONS_ARE_AVAILABLE"}]},{"id":"IF_OPTIONS_ARE_AVAILABLE","children":[{"id":"IF_OPTION_CONTAINS_TEXT","customDisplayName":"If any option contains text \"How do I pay\"","properties":{"Text":"How do I pay"},"children":[{"id":"CHOOSE_OPTION_CONTAINING","properties":{"Text":"How do I pay"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"CREATE_LABEL","properties":{"Label":"SkipDeathTalk2"},"children":[{"id":"IF_CAN_CONTINUE","children":[{"id":"PRESS_SPACEBAR","children":[{"id":"SLEEP_BETWEEN","properties":{"Minimum":"600","Maximum":"800"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"2"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"GO_TO_LABEL","properties":{"Label":"SkipDeathTalk2"}}]}]}]}]}]},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_OPTIONS_ARE_AVAILABLE"}]}]},{"id":"IF_OPTION_CONTAINS_TEXT","customDisplayName":"If any option contains text \"How long\"","properties":{"Text":"How long"},"children":[{"id":"CHOOSE_OPTION_CONTAINING","properties":{"Text":"How long"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"CREATE_LABEL","properties":{"Label":"SkipDeathTalk3"},"children":[{"id":"IF_CAN_CONTINUE","children":[{"id":"PRESS_SPACEBAR","children":[{"id":"SLEEP_BETWEEN","properties":{"Minimum":"600","Maximum":"800"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"2"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"GO_TO_LABEL","properties":{"Label":"SkipDeathTalk3"}}]}]}]}]}]},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_OPTIONS_ARE_AVAILABLE"}]}]},{"id":"IF_OPTION_CONTAINS_TEXT","customDisplayName":"If any option contains text \"How do I know\"","properties":{"Text":"How do I know"},"children":[{"id":"CHOOSE_OPTION_CONTAINING","properties":{"Text":"How do I know"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"CREATE_LABEL","properties":{"Label":"SkipDeathTalk4"},"children":[{"id":"IF_CAN_CONTINUE","children":[{"id":"PRESS_SPACEBAR","children":[{"id":"SLEEP_BETWEEN","properties":{"Minimum":"600","Maximum":"800"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"2"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"GO_TO_LABEL","properties":{"Label":"SkipDeathTalk4"}}]}]}]}]}]},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_OPTIONS_ARE_AVAILABLE"}]}]},{"id":"IF_OPTION_CONTAINS_TEXT","customDisplayName":"If any option contains text \"I think\"","properties":{"Text":"I think"},"children":[{"id":"CHOOSE_OPTION_CONTAINING","properties":{"Text":"I think"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"CREATE_LABEL","properties":{"Label":"SkipDeathTalk5"},"children":[{"id":"IF_CAN_CONTINUE","children":[{"id":"PRESS_SPACEBAR","children":[{"id":"SLEEP_BETWEEN","properties":{"Minimum":"600","Maximum":"800"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"2"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"GO_TO_LABEL","properties":{"Label":"SkipDeathTalk5"}}]}]}]}]}]}]},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"30"},"children":[{"id":"IF_NOT_IN_DIALOGUE"}]}]}]},{"id":"IF_NOT_IN_DIALOGUE","children":[{"id":"GAME_OBJECT_INTERACT","properties":{"Filter Object By":{"class":"GameObject","logic":"NONE","type":"NAME","operator":"EQUALS","value":"Portal"},"Action":"Use"},"children":[{"id":"SLEEP_WHILE_MOVING"},{"id":"SLEEP_WHILE_ANIMATING"},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"10"},"children":[{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"IN_AREA","operator":"EQUALS","value":"v(LUMBRIDGE)"}}}]}]}]}]}]}]},{"id":"IF_VARBIT_MATCHES","properties":{"value":{"class":"Number","operator":"GREATER_THAN_OR_EQUALS","value":"1"},"Varbit":"10465"},"children":[{"id":"PAUSE_ITEM_TRACKER"},{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"IN_AREA","operator":"EQUALS","value":"v(LUMBRIDGE)"}}},{"id":"OR_BRANCH"},{"id":"IF_GAME_MESSAGE_RECEIVED_MATCHES","properties":{"Filter Message":{"class":"Message","logic":"NONE","type":"IS_GAME_MESSAGE","operator":"EQUALS","filters":[{"class":"Message","logic":"AND","type":"TEXT","operator":"EQUALS","value":"Oh dear, you are dead!"},{"class":"Message","logic":"OR","type":"TEXT","operator":"EQUALS","value":"You have items stored in an item retrieval service."},{"class":"Message","logic":"AND","type":"AGE","operator":"EQUALS","value":"120"}]}},"children":[{"id":"SET_VARIABLE","properties":{"Value":"Death Walk","Variable name":"CURRENT_TASK"}}]},{"id":"WHILE_VARIABLE_MATCHES","customDisplayName":"While variable CURRENT_TASK matches Death Walk","properties":{"Filter Value By":{"class":"Variable","logic":"NONE","type":"AS_TEXT","operator":"EQUALS","value":"Death Walk"},"Variable name":"CURRENT_TASK"},"children":[{"id":"CREATE_LABEL","properties":{"Label":"DeathReClaim"}},{"id":"IF_FIRST_RUN","children":[{"id":"SET_VARIABLE","customDisplayName":"Set variable 'DEATHS_DOOR' to '3238, 3191, 3243, 3197'","properties":{"Value":"3238, 3191, 3243, 3197","Variable name":"DEATHS_DOOR"}}]},{"id":"PAUSE_ITEM_TRACKER"},{"id":"WALK_FULLY_TO_AREA","customDisplayName":"Walk to an area v(DEATHS_DOOR)","properties":{"Area":"v(DEATHS_DOOR)"}},{"id":"GAME_OBJECT_INTERACT","properties":{"Filter Object By":{"class":"GameObject","logic":"NONE","type":"NAME","operator":"EQUALS","value":"Death's Domain","filters":[{"class":"GameObject","logic":"AND","type":"IN_AREA","operator":"EQUALS","value":"(3242, 3195, 0),(3242, 3189, 0),(3235, 3189, 0),(3235, 3196, 0)"}]},"Action":"Enter"},"children":[{"id":"SLEEP_WHILE_MOVING"},{"id":"SLEEP_WHILE_ANIMATING"},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"10"},"children":[{"id":"IF_IN_DIALOGUE"}]},{"id":"CREATE_LABEL","properties":{"Label":"SkipDeathTalk6"},"children":[{"id":"IF_CAN_CONTINUE","children":[{"id":"PRESS_SPACEBAR","children":[{"id":"SLEEP_BETWEEN","properties":{"Minimum":"600","Maximum":"800"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"2"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"GO_TO_LABEL","properties":{"Label":"SkipDeathTalk6"}}]}]}]}]},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_OPTIONS_ARE_AVAILABLE"}]},{"id":"CHOOSE_OPTION_CONTAINING","properties":{"Text":"Yes, have you got anything for me?"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"CREATE_LABEL","properties":{"Label":"SkipDeathTalk9"},"children":[{"id":"IF_CAN_CONTINUE","children":[{"id":"PRESS_SPACEBAR","children":[{"id":"SLEEP_BETWEEN","properties":{"Minimum":"600","Maximum":"800"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"2"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"GO_TO_LABEL","properties":{"Label":"SkipDeathTalk9"}}]}]}]}]},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_WIDGET_EXISTS","properties":{"Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"669, 10"}}}]},{"id":"WIDGET_INTERACT","properties":{"Action":"Take-All","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"669, 10"}},"children":[{"id":"CUSTOM_59b0d6d5-80ef-4fde-a09a-4da2e972c4b2"}]},{"id":"IF_WIDGET_EXISTS","properties":{"Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"669, 3, 0"}},"children":[{"id":"SET_TO_WIDGET_ITEM_AMOUNT","properties":{"Variable name":"ClaimAmount"},"children":[{"id":"IF_VARIABLE_IS","properties":{"Filter Value By":{"class":"Variable","logic":"NONE","type":"AS_NUMBER","operator":"GREATER_THAN_OR_EQUAL","value":"1"},"Variable name":"ClaimAmount"},"children":[{"id":"SET_VARIABLE","properties":{"Value":"true","Variable name":"DeathReClaim"}}]},{"id":"ELSE_BRANCH","children":[{"id":"SET_VARIABLE","properties":{"Value":"false","Variable name":"DeathReClaim"}}]}]}]},{"id":"WIDGET_INTERACT","properties":{"Action":"Close","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"669, 1, 11"}},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"3"},"children":[{"id":"IF_WIDGET_DOES_NOT_EXIST","properties":{"Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"669, 1, 11"}}}]}]}]},{"id":"ELSE_BRANCH","children":[{"id":"CHOOSE_OPTION_CONTAINING","properties":{"Text":"collect"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"3"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"CREATE_LABEL","properties":{"Label":"SkipDeathTalk7"},"children":[{"id":"IF_CAN_CONTINUE","children":[{"id":"PRESS_SPACEBAR","children":[{"id":"SLEEP_BETWEEN","properties":{"Minimum":"600","Maximum":"800"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"2"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"GO_TO_LABEL","properties":{"Label":"SkipDeathTalk7"}}]}]}]}]},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_OPTIONS_ARE_AVAILABLE"}]},{"id":"CHOOSE_OPTION_CONTAINING","properties":{"Text":"bring"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"10"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"CREATE_LABEL","properties":{"Label":"SkipDeathTalk8"},"children":[{"id":"IF_CAN_CONTINUE","children":[{"id":"PRESS_SPACEBAR","children":[{"id":"SLEEP_BETWEEN","properties":{"Minimum":"600","Maximum":"800"},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"2"},"children":[{"id":"IF_CAN_CONTINUE"}]},{"id":"GO_TO_LABEL","properties":{"Label":"SkipDeathTalk8"}}]}]}]}]},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"5"},"children":[{"id":"IF_WIDGET_EXISTS","properties":{"Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"669, 10"}}}]},{"id":"WIDGET_INTERACT","properties":{"Action":"Take-All","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"669, 10"}},"children":[{"id":"CUSTOM_59b0d6d5-80ef-4fde-a09a-4da2e972c4b2"}]},{"id":"IF_WIDGET_EXISTS","properties":{"Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"669, 3, 0"}},"children":[{"id":"SET_TO_WIDGET_ITEM_AMOUNT","properties":{"Variable name":"ClaimAmount"},"children":[{"id":"IF_VARIABLE_IS","properties":{"Filter Value By":{"class":"Variable","logic":"NONE","type":"AS_NUMBER","operator":"GREATER_THAN_OR_EQUAL","value":"1"},"Variable name":"ClaimAmount"},"children":[{"id":"SET_VARIABLE","properties":{"Value":"true","Variable name":"DeathReClaim"}}]},{"id":"ELSE_BRANCH","children":[{"id":"SET_VARIABLE","properties":{"Value":"false","Variable name":"DeathReClaim"}}]}]}]},{"id":"WIDGET_INTERACT","properties":{"Action":"Close","Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"669, 1, 11"}},"children":[{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"3"},"children":[{"id":"IF_WIDGET_DOES_NOT_EXIST","properties":{"Find Widget By":{"class":"Widget","logic":"NONE","type":"WIDGET_ID","operator":"EQUALS","value":"669, 1, 11"}}}]}]}]}]}]},{"id":"GAME_OBJECT_INTERACT","properties":{"Filter Object By":{"class":"GameObject","logic":"NONE","type":"NAME","operator":"EQUALS","value":"Portal"},"Action":"Use"},"children":[{"id":"SLEEP_WHILE_MOVING"},{"id":"SLEEP_WHILE_ANIMATING"},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"10"},"children":[{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"TILE","operator":"EQUALS","value":"(3238, 3194, 0)"}}}]}]}]},{"id":"CUSTOM_71ab7dac-7c9c-4740-b639-82b041314160"},{"id":"IF_VARIABLE_IS","properties":{"Filter Value By":{"class":"Variable","logic":"NONE","type":"AS_TEXT","operator":"EQUALS","value":"false"},"Variable name":"DeathReClaim"},"children":[{"id":"SET_VARIABLE","properties":{"Value":"None","Variable name":"CURRENT_TASK"}}]},{"id":"IF_VARIABLE_IS","properties":{"Filter Value By":{"class":"Variable","logic":"NONE","type":"AS_TEXT","operator":"EQUALS","value":"true"},"Variable name":"DeathReClaim"},"children":[{"id":"SET_VARIABLE","properties":{"Value":"DeathReclaim","Variable name":"CURRENT_TASK"}},{"id":"GO_TO_LABEL","properties":{"Label":"DeathReClaim"}}]}]}]},{"id":"IF_NPC_EXISTS","properties":{"Filter NPC By":{"class":"NPC","logic":"NONE","type":"NAME","operator":"EQUALS","value":"Death"}},"children":[{"id":"GAME_OBJECT_INTERACT","properties":{"Filter Object By":{"class":"GameObject","logic":"NONE","type":"NAME","operator":"EQUALS","value":"Portal"},"Action":"Use"},"children":[{"id":"SLEEP_WHILE_MOVING"},{"id":"SLEEP_WHILE_ANIMATING"},{"id":"SLEEP_UNTIL_INSIDE_IS_TRUE","properties":{"Max time (seconds)":"10"},"children":[{"id":"IF_LOCAL_PLAYER_MATCHES","properties":{"Filter By":{"class":"Player","logic":"NONE","type":"IN_AREA","operator":"EQUALS","value":"v(LUMBRIDGE)"}}}]}]},{"id":"GO_TO_LABEL","properties":{"Label":"First Death"}}]},{"id":"RESUME_ITEM_TRACKER"}]}