{"sleep":"500","name":"Crafting - Calculate the most profitable F2P item","version":1.0,"metadata":{"network-id":"56","network-downloaded-at":"1721665195397"},"actions":[{"id":"COMMENT","properties":{"Comment":"Set vars"},"children":[{"id":"SET_TO_LOCAL_PLAYER_REAL_SKILL_LEVEL","properties":{"Skill":{"class":"Skill","value":"CRAFTING"},"Variable name":"level_crafting"}},{"id":"SET_TO_ITEM_LIVE_PRICE_NAME","properties":{"Variable name":"price_gold_bar","Name":"Gold bar"}},{"id":"SET_TO_ITEM_LIVE_PRICE_NAME","properties":{"Variable name":"price_diamond","Name":"Diamond"}},{"id":"SET_TO_ITEM_LIVE_PRICE_NAME","properties":{"Variable name":"price_emerald","Name":"Emerald"}},{"id":"SET_TO_ITEM_LIVE_PRICE_NAME","properties":{"Variable name":"price_sapphire","Name":"Sapphire"}}]},{"id":"IF_VARIABLE_IS_NOT_SET","properties":{"Variable name":"CraftingItems"},"children":[{"id":"LOAD_MAP_FROM_JSON","properties":{"JSON":"{     \"Gold ring\": {         \"Level\": \"5\",         \"tool\": \"Ring mould\",         \"items\": \"Gold bar\"     },     \"Gold necklace\": {         \"Level\": \"6\",         \"tool\": \"Necklace mould\",         \"items\": \"Gold bar\"     },     \"Gold amulet (u)\": {         \"Level\": \"8\",         \"tool\": \"Amulet mould\",         \"items\": \"Gold bar\"     },     \"Sapphire ring\": {         \"Level\": \"20\",         \"tool\": \"Ring mould\",         \"items\": \"Sapphire,Gold bar\"     },     \"Diamond ring\": {         \"Level\": \"43\",         \"tool\": \"Ring mould\",         \"items\": \"Diamond,Gold bar\"     },     \"Emerald amulet (u)\": {         \"Level\": \"31\",         \"tool\": \"Amulet mould\",         \"items\": \"Emerald,Gold bar\"     },     \"Sapphire necklace\": {         \"Level\": \"22\",         \"tool\": \"Necklace mould\",         \"items\": \"Sapphire,Gold bar\"     },     \"Ruby necklace\": {         \"Level\": \"40\",         \"tool\": \"Necklace mould\",         \"items\": \"Ruby,Gold bar\"     },     \"Sapphire amulet (u)\": {         \"Level\": \"24\",         \"tool\": \"Amulet mould\",         \"items\": \"Sapphire,Gold bar\"     },     \"Diamond necklace\": {         \"Level\": \"56\",         \"tool\": \"Necklace mould\",         \"items\": \"Diamond,Gold bar\"     } }","Map name":"CraftingItems"}}]},{"id":"IF_VARIABLE_IS_NOT_SET","properties":{"Variable name":"crafting_highest_margin"},"children":[{"id":"SET_VARIABLE","properties":{"Value":"0","Variable name":"crafting_highest_margin"}}]},{"id":"IF_VALUE_IS","customDisplayName":"If Crafting is higher than 5, calculate profitable items","properties":{"Value":"v(level_crafting)","Filter By":{"class":"Variable","logic":"NONE","type":"AS_NUMBER","operator":"GREATER_THAN_OR_EQUAL","value":"5"}},"children":[{"id":"FOR_EACH_KEY_IN_MAP","customDisplayName":"For each in CraftingItems set details","properties":{"Map name":"CraftingItems"},"children":[{"id":"SET_VARIABLE_TO_LAST_OUTPUT","properties":{"Variable name":"crafting_item_check"}},{"id":"IF_VALUE_IS","properties":{"Value":"v(level_crafting)","Filter By":{"class":"Variable","logic":"NONE","type":"AS_NUMBER","operator":"GREATER_THAN_OR_EQUAL","value":"map(CraftingItems.v(crafting_item_check).Level))"}},"children":[{"id":"IF_LIST_DOES_NOT_CONTAIN","properties":{"List name":"list_crafting","Value":"v(crafting_item_check)"}},{"id":"OR_BRANCH"},{"id":"IF_VARIABLE_IS_NOT_SET","properties":{"Variable name":"list_crafting"},"children":[{"id":"ADD_TO_LIST","properties":{"List name":"list_crafting","Value":"v(crafting_item_check)"}}]}]}]},{"id":"FOR_EACH_IN_LIST","customDisplayName":"For each in list_crafting. Set live prices & most profitable","properties":{"List name":"list_crafting","Reverse order":false},"children":[{"id":"SET_VARIABLE_TO_LAST_OUTPUT","properties":{"Variable name":"list_crafting_check"}},{"id":"COMMENT","properties":{"Comment":"Add live prices to map"},"children":[{"id":"SET_TO_ITEM_LIVE_PRICE_NAME","properties":{"Variable name":"crafting_item_check_price","Name":"v(list_crafting_check)"},"children":[{"id":"SET_MAP_KEY_TO_VALUE","properties":{"Value":"v(crafting_item_check_price)","Key":"Price","Map name":"CraftingItems.v(list_crafting_check)"}}]}]},{"id":"COMMENT","properties":{"Comment":"Calculate the most profitable item"},"children":[{"id":"COMMENT","properties":{"Comment":"Deduct supply costs"}},{"id":"IF_VALUE_IS","properties":{"Value":"v(list_crafting_check)","Filter By":{"class":"Variable","logic":"NONE","type":"AS_TEXT","operator":"CONTAINS","value":"gold"}},"children":[{"id":"SET_VARIABLE","properties":{"Value":"sub(v(crafting_item_check_price), v(price_gold_bar))","Variable name":"list_crafting_check_margin"}}]},{"id":"IF_VALUE_IS","properties":{"Value":"v(list_crafting_check)","Filter By":{"class":"Variable","logic":"NONE","type":"AS_TEXT","operator":"CONTAINS","value":"diamond"}},"children":[{"id":"SET_VARIABLE","properties":{"Value":"sub(v(crafting_item_check_price), v(price_gold_bar), v(price_diamond))","Variable name":"list_crafting_check_margin"}}]},{"id":"IF_VALUE_IS","properties":{"Value":"v(list_crafting_check)","Filter By":{"class":"Variable","logic":"NONE","type":"AS_TEXT","operator":"CONTAINS","value":"emerald"}},"children":[{"id":"SET_VARIABLE","properties":{"Value":"sub(v(crafting_item_check_price), v(price_gold_bar), v(price_emerald))","Variable name":"list_crafting_check_margin"}}]},{"id":"IF_VALUE_IS","properties":{"Value":"v(list_crafting_check)","Filter By":{"class":"Variable","logic":"NONE","type":"AS_TEXT","operator":"CONTAINS","value":"sapphire"}},"children":[{"id":"SET_VARIABLE","properties":{"Value":"sub(v(crafting_item_check_price), v(price_gold_bar), v(price_sapphire))","Variable name":"list_crafting_check_margin"}}]},{"id":"IF_VALUE_IS","customDisplayName":"if the margin check is higher than the current highest margin","properties":{"Value":"v(list_crafting_check_margin)","Filter By":{"class":"Variable","logic":"NONE","type":"AS_NUMBER","operator":"GREATER_THAN","value":"v(crafting_highest_margin)"}},"children":[{"id":"SET_VARIABLE","properties":{"Value":"v(list_crafting_check_margin)","Variable name":"crafting_highest_margin"}}]},{"id":"ELSE_BRANCH","children":[{"id":"SET_VARIABLE","properties":{"Value":"v(list_crafting_check)","Variable name":"crafting_profitable_item"}}]}]}]}]},{"id":"PAINT_ROOT","children":[{"id":"DRAW_TEXT","properties":{"Y":"100","Text":"Most profitable item to craft: v(crafting_profitable_item)","Font":{"class":"Font","value":"Inter V"},"Color":{"class":"Color","value":-1}}},{"id":"DRAW_TEXT","properties":{"Y":"125","Text":"Profit per item: v(crafting_highest_margin) GP","Font":{"class":"Font","value":"Inter V"},"Color":{"class":"Color","value":-1}}},{"id":"DRAW_TEXT","properties":{"Y":"45","Text":"Crafting level: v(level_crafting)","Font":{"class":"Font","value":"Inter V"},"Color":{"class":"Color","value":-1}}}]}]}